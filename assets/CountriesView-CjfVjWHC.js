import{t as h,d as y,u as b,c as s,w as k,v as T,a as V,o as u,r as f,b as x,e as C,f as v,g as _,F,h as j}from"./index-CeA7tyw4.js";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const w=()=>{};function D(o,t){function a(...e){return new Promise((n,r)=>{Promise.resolve(o(()=>t.apply(this,e),{fn:t,thisArg:this,args:e})).then(n).catch(r)})}return a}function N(o,t={}){let a,e,n=w;const r=l=>{clearTimeout(l),n(),n=w};let d;return l=>{const i=h(o),m=h(t.maxWait);return a&&r(a),i<=0||m!==void 0&&m<=0?(e&&(r(e),e=null),Promise.resolve(l())):new Promise((p,g)=>{n=t.rejectOnCancel?g:p,d=l,m&&!e&&(e=setTimeout(()=>{a&&r(a),e=null,p(d())},m)),a=setTimeout(()=>{e&&r(e),e=null,p(l())},i)})}}function P(o,t=200,a={}){return D(N(t,a),o)}const W=async o=>await(await fetch(`https://restcountries.com/v3.1/name/${o}?fields=name`)).json(),B=y({__name:"Input",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=b(o,"modelValue");return(a,e)=>(u(),s("div",null,[k(V("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>t.value=n)},null,512),[[T,t.value]])]))}}),E={key:0},L={key:1},M={key:2},O={key:3},q=y({__name:"CountriesView",setup(o){const t=f(""),a=f([]),e=f(!1),n=f(null),r=P(async()=>{await d()},500),d=async()=>{if(t.value.length<3){a.value=[];return}e.value=!0,n.value=null;try{const c=await W(t.value);Object.hasOwn(c,"status")&&c.status===404&&(n.value="Error when request data"),a.value=c}catch{n.value="Error when request data"}finally{e.value=!1}};return x(t,r),(c,l)=>(u(),s("div",null,[l[1]||(l[1]=V("h1",null,"Countries",-1)),C(B,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=i=>t.value=i)},null,8,["modelValue"]),e.value?(u(),s("div",E,"Loading ...")):v("",!0),n.value?(u(),s("div",L,_(n.value),1)):v("",!0),!e.value&&a.value.length?(u(),s("ul",M,[(u(!0),s(F,null,j(a.value,i=>(u(),s("li",{key:i.name.official},_(i.name.official),1))),128))])):v("",!0),!e.value&&!n.value&&!a.value.length?(u(),s("div",O,"No contries found")):v("",!0)]))}});export{q as default};
